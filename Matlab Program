function mainProgram

    %Menu function to choose sub programs to run
    %Data Capture
    parameters; %Settings
    %Graphing
    %Statistics
    %Load and save data
    %Comparison
    %Exit
    
end


function [sampleRate, sampleNumber]=parameters(sampleRate, sampleNumber)
  exitflag=0;
  while exitFlag==0
    fprintf('Parameter settings\n');
    fprintf('1. Print current parameters\n');
    fprintf('2. Change parameters\n');
    fprintf('3. Exit\n');
    userInputM1=input('Please select:');
    switch (userInput)
        case '1'
            fprintf('Current Parameters:\n');
            fprintf('Sample Rate in seconds: %f\n', sampleRate);
            fprintf('Number of samples: %d\n', sampleNumber);
        
        case '2'
            exitFlag2 = 0;
            while (exitFlag2==0)
                fprintf('Change Parameters\n');
                fprintf('1. Sample Rate in seconds\n');
                fprintf('2. Sample Number\n');
                fprintf('3. Exit\n');
                userInputM2 = input('Please select:');
                switch(userInputM2)
                    case '1'
                       userInputM3 = abs(input('What is the new Sample Rate in seconds?'));
                       if(userInputM3>0)
                           sampleRate = userInputM3;
                           writeParams;
                           fprintf('The new sample rate is %f s\n', sampleRate);
                       else
                           fprintf('New value must be greater than 0\n');
                       end
                       
                    case '2'
                        userInputM4 = abs(input('What is the new number of samples?'));
                        if(userInputM4>0)
                            sampleNumber = userInputM4;
                            writeParams;
                            fprintf('The new number of samples is %d \n', sampleNumber);
                        else
                            fprintf('New value must be greater than 0\n');
                        end
                                           
                    case '3'
                        fprintf('Returning to main menu...\n');
                        exitFlag2=1;
                        
                    otherwise
                        fprintf('Invalid choice - please select again.\n');
                        
                end
            end
        case '3'
            fprintf('Returning to main menu...\n');
            exitFlag=1;
            
        otherwise
            fprintf('Invalid choice - please select again.\n');
    end
  end
end
                
function writeParams
paramArray = [sampleRate ; sampleNumber];
paramToFile;
end


function paramToFile
fileID = fopen('settings.txt',paramArray);
fwrite(fileID,paramArray);
fclose(fileID);
end

function dataToFile

end

function dataCapture
mbed = serial('COM4')
fopen(mbed)
data = fscanf(mbed)
fclose(mbed)
end
